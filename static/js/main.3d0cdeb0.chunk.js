(this["webpackJsonpreact-pokeguess"]=this["webpackJsonpreact-pokeguess"]||[]).push([[0],{23:function(e,t,n){e.exports=n(35)},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(20),c=n.n(u),l=n(1),o=n(9),i=function(e){var t=e.children;return r.a.createElement("div",{style:{paddingBottom:"1em",paddingTop:"1em",display:"flex",flexDirection:"column"}},t)},s=function(e){var t=e.action,n=e.label;return r.a.createElement("button",{onClick:function(){return t()},style:{background:"unset",padding:"1em 2em",display:"inline-block",fontFamily:"'Press Start 2P', 'Helvetica Neue', 'Roboto', sans-serif",border:"2px solid #000",borderRadius:"4px",outline:"none",cursor:"pointer",marginBottom:"1em"}},n)},m=function(e){var t=e.data;return"debug"===Object({NODE_ENV:"production",PUBLIC_URL:"/pokeguess",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_USER_ENV?r.a.createElement("pre",null,JSON.stringify(t,null,2)):null},p=function(e){var t=e.value;return r.a.createElement("input",{type:"text",readOnly:!0,disabled:!0,value:t,style:{padding:"1em",background:"unset",border:"unset",fontFamily:"'Press Start 2P', 'Helvetica Neue', 'Roboto', sans-serif",letterSpacing:"1em",textAlign:"center"}})},d=function(e){var t=e.children;return r.a.createElement("div",{style:{width:"100%",maxWidth:"350px",margin:"auto",textAlign:"center"}},t)},f=n(7),E=function(e){var t=e.value,n=e.onChange;return r.a.createElement("input",{type:"text",onChange:n,value:t,autoFocus:!0,style:{textAlign:"center",padding:"1em",marginBottom:"1em",border:"unset",background:"unset",borderRadius:"unset",borderBottom:"2px solid #000",outline:"none",fontFamily:"'Press Start 2P', 'Helvetica Neue', 'Roboto', sans-serif",fontSize:"1em"}})},v=function(){return r.a.createElement("button",{type:"submit",style:{background:"unset",padding:"1em 2em",display:"inline-block",fontFamily:"'Press Start 2P', 'Helvetica Neue', 'Roboto', sans-serif",border:"2px solid #000",backgroundColor:"#000",color:"#fff",borderRadius:"4px",outline:"none",cursor:"pointer"}},"Guess")},b=function(e){var t=e.validate,n=e.pop,u=Object(a.useState)(""),c=Object(f.a)(u,2),l=c[0],o=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),t(l))return n(),void o("")},style:{display:"inline-flex",flexDirection:"column"}},r.a.createElement(E,{onChange:function(e){var t=e.target;return o(t.value)},value:l}),r.a.createElement(v,null)))},h=function(e){var t=e.queue;return r.a.createElement("p",null,t.length," pokemon left!")},g=function(e){var t=e.src,n=e.alt,a=void 0===n?"???":n;return r.a.createElement("img",{src:t,alt:a,style:{maxWidth:"150px",height:"150px",margin:"auto"}})},O=n(12),y=n.n(O),j=n(15);function k(e){for(var t=Array.from(e),n=t.length-1;n>0;n--){var a=Math.floor(Math.random()*(n+1)),r=[t[a],t[n]];t[n]=r[0],t[a]=r[1]}return t}function S(e){var t=e.length;return e.split("").map((function(e,n){return n/t/Math.random()*10>10?"-":e})).join("")}function x(){return new Promise(function(){var e=Object(j.a)(y.a.mark((function e(t,n){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://pokeapi.co/api/v2/generation/1");case 3:if(!(a=e.sent).ok){e.next=9;break}return e.next=7,a.json();case 7:r=e.sent,t(r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(e.t0.message);case 14:n("pokeapi err, service unavailable :(");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}())}function w(e){return e.pokemon_species.map((function(e){var t=e.name,n=+e.url.replace("https://pokeapi.co/api/v2/pokemon-species","").replaceAll("/","");return{id:n,name:t,sprite:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/".concat(n,".png")}})).sort((function(e,t){return e.id-t.id}))}var q=Object(a.createContext)(null),P=q.Consumer,C=q.Provider,F=P,R=function(e){var t=e.children,n=Object(a.useState)(null),u=Object(f.a)(n,2),c=u[0],l=u[1],o=Object(a.useState)(null),i=Object(f.a)(o,2),s=i[0],m=i[1];return Object(a.useEffect)((function(){function e(){return(e=Object(j.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().catch((function(e){return m(e)}));case 2:return t=e.sent,window.localStorage.setItem("pokemon_gen_1",JSON.stringify(t)),l(w(t)),e.abrupt("return");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=window.localStorage.getItem("pokemon_gen_1");if(t)return l(w(JSON.parse(t))),function(){l(null),m(null)};!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(C,{value:{pokemon:c,error:s}},(s||!c)&&r.a.createElement("p",null,"Sorry, the game is undergoing maintenance, please get in touch if you want to see it back up again ASAP"),c&&t)},T=function(e){return function(t){return(n=F,function(e){return function(t){return r.a.createElement(n,null,(function(n){return n?r.a.createElement(e,Object.assign({},n,t)):null}))}})(e)(t);var n}},A=n(22),L=n(3),_="IN PROGRESS",I="SUCCESS",N="FAILURE",H="POP",M="SKIP",B="RESET",D="HELP",G="STOP",J="TOGGLE_ERROR",U=["It was so close!","Argh, almost had it!","Not quite!"],W=function(e,t){switch(t.type){case H:var n=e.queue,a=n.shift();return a?{queue:n,current:a,state:e.state}:{state:I};case M:var r=e.queue,u=e.current;r.push(u);var c=r.shift();return{queue:r,current:c,state:e.state};case B:var l=k(t.queue);return{state:_,queue:Array.from(l).slice(1,l.length),current:Array.from(l).shift()};case D:var o=e.current,i=o.name;29!==o.id&&32!==o.id||(i="nidoran"),122===o.id&&(i="mr. mime");var s=S(i);return Object(L.a)(Object(L.a)({},e),{},{helpText:s});case G:return Object(L.a)(Object(L.a)({},e),{},{state:N});case J:var m=e.errorIndex,p=void 0===m?-1:m;return Object(L.a)(Object(L.a)({},e),{},{errorIndex:(p+1)%U.length});default:return e}},K={default:function(e,t){return e.trim().toLocaleLowerCase()===t.toLocaleLowerCase()},29:function(e,t){return"nidoran"===e.trim().toLocaleLowerCase()||K.default(e,t)},32:function(e,t){return"nidoran"===e.trim().toLocaleLowerCase()||K.default(e,t)},122:function(e,t){return"mrmime"===e.trim().toLocaleLowerCase().replaceAll(" ","")||"mr.mime"===e.toLocaleLowerCase().replaceAll(" ","")||K.default(e,t)}},Q=function(e){var t=e.queue,n=function(e){var t=e.queue,n=k(Object(A.a)(t));return Object(a.useReducer)(W,{state:_,queue:n.slice(1,t.length),current:n.shift()})}({queue:t}),r=Object(f.a)(n,2),u=r[0],c=r[1],l=K[u.current.id]||K.default;return Object(L.a)(Object(L.a)({},u),{},{dispatch:c,pop:function(){return c({type:H})},skip:function(){return c({type:M})},reset:function(){return c({type:B,queue:t})},help:function(){return c({type:D})},validate:function(e){var t=l(e,u.current.name);return t||c({type:J}),t},error:U[u.errorIndex]})},V=T((function(e){var t=e.pokemon,n=Object(l.f)(),a=Q({queue:t}),u=a.current,c=a.queue,o=a.helpText,f=a.pop,E=a.validate,v=a.skip,O=a.help,y=a.reset,j=a.state,k=a.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null,r.a.createElement(h,{queue:c}),r.a.createElement(b,{validate:E,pop:f}),r.a.createElement(g,{src:u.sprite}),o&&r.a.createElement(p,{value:o}),k&&r.a.createElement("p",null,k),r.a.createElement(i,null,j===_&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{label:"Help",action:O}),r.a.createElement(s,{label:"Skip",action:v}),r.a.createElement(s,{label:"Quit",action:function(){return n.push("/")}})),j===I&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{label:"Play again",action:y}))),r.a.createElement(m,{data:j}),r.a.createElement(m,{data:u})))})),z=T((function(e){var t=e.pokemon,n=Object(l.f)(),u=function(e){var t=e.queue,n=e.allowedFailures,r=void 0===n?10:n,u=Q({queue:t}),c=Object(a.useState)(r),l=Object(f.a)(c,2),o=l[0],i=l[1];return Object(L.a)(Object(L.a)({},u),{},{dispatch:function(e){if(e.type===B)return i(r),void u.dispatch(Object(L.a)(Object(L.a)({},e),{},{queue:t}));u.dispatch(e)},validate:function(e){var t=u.validate(e);if(!t){var n=o-1;n<=0&&u.dispatch({type:G}),i(n)}return t},allowedFailures:o})}({queue:t,allowedFailures:5}),c=u.current,o=u.queue,p=u.validate,E=u.state,v=u.error,O=u.dispatch,y=u.allowedFailures;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null,r.a.createElement(g,{src:c.sprite}),E!==N&&r.a.createElement(b,{validate:p,pop:function(){return O({type:H})}}),v&&r.a.createElement("p",null,v),r.a.createElement("p",null,"Guesses left: ",y),r.a.createElement(i,null,E===_&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{label:"Quit",action:function(){return n.push("/")}})),(E===I||E===N)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{label:"Play again",action:function(){return O({type:B})}}),r.a.createElement(s,{label:"Main Menu",action:function(){return n.push("/")}}))),r.a.createElement(h,{queue:o}),r.a.createElement(m,{data:E}),r.a.createElement(m,{data:c})))})),X=T((function(e){var t=e.pokemon,n=Object(l.f)(),u=function(e){var t=e.queue,n=e.timer,r=void 0===n?3e3:n,u=Q({queue:t}),c=Object(a.useState)(r),l=Object(f.a)(c,2),o=l[0],i=l[1],s=Object(a.useRef)();Object(a.useEffect)((function(){s.current=setTimeout((function(){if(o-1e3<=0)return u.dispatch({type:G}),clearTimeout(s.current),void i(0);i(o-1e3)}),1e3)}),[o,u]);return Object(L.a)(Object(L.a)({},u),{},{timeMS:o,dispatch:function(e){return e.type===H?(clearTimeout(s.current),i(r),void u.dispatch(e)):e.type===B?(clearTimeout(s.current),i(r),void u.dispatch(Object(L.a)(Object(L.a)({},e),{},{queue:t}))):void u.dispatch(e)}})}({queue:t,timer:1e4}),c=u.current,o=u.queue,p=u.validate,E=u.state,v=u.error,O=u.dispatch,y=u.timeMS;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null,r.a.createElement(g,{src:c.sprite}),r.a.createElement("p",null,"Time left: ",y/1e3," seconds!"),E!==N&&r.a.createElement(b,{validate:p,pop:function(){return O({type:H})}}),v&&r.a.createElement("p",null,v),r.a.createElement(i,null,E===_&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{label:"Quit",action:function(){return n.push("/")}})),(E===I||E===N)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s,{label:"Play again",action:function(){return O({type:B})}}),r.a.createElement(s,{label:"Main Menu",action:function(){return n.push("/")}}))),r.a.createElement(h,{queue:o}),r.a.createElement(m,{data:E}),r.a.createElement(m,{data:c})))})),Y=function(){var e=Object(l.f)();return r.a.createElement(d,null,r.a.createElement("div",{style:{paddingBottom:"2em",paddingTop:"2em"}},r.a.createElement("h1",null,"PokeGuess"),r.a.createElement("p",null,"Start a new game")),r.a.createElement(i,null,r.a.createElement(s,{label:"Casual",action:function(){return e.push("/casual")}}),r.a.createElement(s,{label:"Hardcore",action:function(){return e.push("/hardcore")}}),r.a.createElement(s,{label:"Time Attack",action:function(){return e.push("/time-attack")}})))},Z=function(){return r.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden",textAlign:"center"}},r.a.createElement(R,null,r.a.createElement(o.a,{basename:"/pokeguess"},r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/casual",exact:!0},r.a.createElement(V,null)),r.a.createElement(l.a,{path:"/hardcore",exact:!0},r.a.createElement(z,null)),r.a.createElement(l.a,{path:"/time-attack",exact:!0},r.a.createElement(X,null)),r.a.createElement(l.a,{path:"/",exact:!0},r.a.createElement(Y,null)),r.a.createElement(l.a,{path:"*"},r.a.createElement("div",null,"Oh no :("))))))};n(34);c.a.render(r.a.createElement(Z,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.3d0cdeb0.chunk.js.map